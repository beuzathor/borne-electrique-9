---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import Footer from '../../../components/Footer.astro';
import PostCard from '../../../components/blog/PostCard.astro';
import CategoryHeader from '../../../components/blog/CategoryHeader.astro';
import Pagination from '../../../components/common/Pagination.astro';
import { getCategories } from '../../../lib/wordpress/categories';
import { getPostsByCategory } from '../../../lib/wordpress/categories';
import { cleanHtml } from '../../../lib/wordpress/utils';

export async function getStaticPaths() {
  const response = await getCategories();
  const categories = response.data || [];
  
  return categories.map(category => ({
    params: { slug: category.slug },
    props: { category }
  }));
}

const { category } = Astro.props;
const response = await getPostsByCategory(category.id, 1);
const posts = response.data || [];
const currentPage = 1;

const title = `${cleanHtml(category.name)} - Articles sur les bornes de recharge - ElectroBorne`;
const description = `Découvrez tous nos articles sur ${cleanHtml(category.name)}. Guides, conseils et actualités sur les bornes de recharge électrique.`;
const canonical = `https://www.installer-borne-recharge.fr/blog/category/${category.slug}`;
---

<Layout 
  title={title}
  description={description}
  canonical={canonical}
>
  <Header />
  <!-- Reste du code inchangé -->
</Layout>